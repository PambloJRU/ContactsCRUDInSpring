<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista de Contactos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
    <div th:if="${succesMsg!=null}">
        [[${succesMsg}]]
    </div>
    <h1>Lista de petones</h1>
        <a href="/new">Nuevo contacto</a>

    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Email</th>
            <th>Numero Telefonico</th>
            <th>Fecha de Agregado</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="contact:${contacts}">
            <td th:text="${contact.id}"></td>
            <td th:text="${contact.name}"></td>
            <td th:text="${contact.email}"></td>
            <td th:text="${contact.cellphoneNumber}"></td>
            <td th:text="${#temporals.format(contact.dateOfEntry,'dd/MM/YYYY')}"></td>
            <td>
                <a th:href="@{/{id}/edit/(id=${contact.id})}">Editar</a>
                <a href="#" onclick="deleteContact(this)">Eliminar</a>
                <form th:action="@{/{id}/delete/(id=${contact.id})}" method="post"></form>
            </td>
        </tr>
        </tbody>
    </table>

    <script>
        function deleteContact(element){
            var ok = confirm('Seguro que desea eliminar el contacto?');
            if(ok){
                element.nextElementSibling.submit();
            }
        }
    </script>

</body>
</html>